apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../base
  - https://github.com/querti/mintmaker/config/default?ref=a507e9cfdb2080ac85669dc082b3c34d8061391c
  - https://github.com/querti/mintmaker/config/renovate?ref=a507e9cfdb2080ac85669dc082b3c34d8061391c

images:
  - name: quay.io/konflux-ci/mintmaker
    newName: quay.io/lgallovi-test/mintmaker-test
    newTag: namespace-test

namespace: mintmaker

commonAnnotations:
  argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true

components:
  - ../components/rh-certs


patches:
- target:
    kind: Deployment
    name: mintmaker-controller-manager
  patch: |-
    - op: replace
      path: /spec/template/metadata/annotations/mintmaker.appstudio.redhat.com~1renovate-image
      value: "quay.io/konflux-ci/mintmaker-renovate-image:63bbd024c8dd55cecf621a4cf2179f4c230b88ca"